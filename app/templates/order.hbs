{{page-title "Order"}}

<a class="brown ui button" href="/board">Retour aux commandes à préparer</a>
<div class="ui fluid black inverted segment">{{@model.user.name}} ({{@model.user.email}})</div>
<div class="ui tertiary segment compact">{{@model.dateCreation}}</div>

<div class="column">
  <table class="ui celled table">
    <thead>
    <tr>
      <th>Produit</th>
      <th>Quantité</th>
      <th>Prix</th>
      <th>Montant</th>
      <th>Preparation</th>
    </tr>
    </thead>
    <tbody>
    {{#each @model.orderdetails as |order|}}
      {{#if order.prepared}}
        <tr class="positive">
          <td>{{order.product.name}}</td>
          <td>{{order.quantity}}</td>
          <td>{{order.product.price}}€</td>
          <td>{{order.amount}}€</td>
          <td><Input @type="checkbox" @checked={{order.prepared}}/></td>
        </tr>
      {{else}}
        <tr>
          <td>{{order.product.name}}</td>
          <td>{{order.quantity}}</td>
          <td>{{order.product.price}}€</td>
          <td>{{order.amount}}€</td>
          <td><Input @type="checkbox" @checked={{order.prepared}}/></td>
        </tr>
      {{/if}}
    {{/each}}
    </tbody>

    <tfoot>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td>{{@model.amount}}€</td>
        <td>{{@model.toPay}}€</td>
      </tr>
    </tfoot>

  </table>
</div>


<h2>Produits Préparés ({{@model.orderdetails.count}})</h2>
<div class="ui list">
  {{#each @model.orderdetails as |orderdetails|}}
    {{#if orderdetails.prepared}}
      <div class="item">
        <i class="ui icon shopping basket"></i>
        <div class="content">
          <a class="header">{{orderdetails.product.name}}</a>
          <div class="description">{{orderdetails.product.price}} X {{orderdetails.quantity}}</div>
          <div class="ui divider"></div>
        </div>
      </div>
    {{/if}}
    <br>
  {{/each}}
</div>
<a class="ui green button" href="/board" {{on "click" this.changeStatus}}>✓ Valider pour {{@model.amount}}€</a>
{{outlet}}